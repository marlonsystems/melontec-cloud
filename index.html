<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MelonTec Cloud — Secure • Private • SSS</title>
<meta name="description" content="MelonTec Cloud — Demo frontend for secure accounts with 2FA." />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#060708;
    --panel:#0f1113;
    --muted:#9aa3aa;
    --accent:#5fe0c8;
    --glass: rgba(255,255,255,0.03);
    --card-shadow: 0 10px 30px rgba(0,0,0,0.6);
    --radius:14px;
    --maxw:1100px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#040506,var(--bg));font-family:Inter,system-ui,-apple-system; color:#e9eef0}
  .app{max-width:var(--maxw);margin:28px auto;border-radius:16px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);box-shadow: 0 30px 90px rgba(0,0,0,0.7)}
  header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;border-bottom:1px solid rgba(255,255,255,0.02)}
  .brand{font-weight:800;color:var(--accent);letter-spacing:1px} 
  .nav-right{display:flex;gap:12px;align-items:center}
  .seg {background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;cursor:pointer;color:var(--muted)}
  .seg.active{border-color:rgba(95,224,200,0.14);background:linear-gradient(90deg, rgba(95,224,200,0.04), rgba(95,224,200,0.01));color:var(--accent);font-weight:700}
  main{display:grid;grid-template-columns: 320px 1fr;gap:18px;padding:22px}
  /* left pane: auth / sections */
  .left {
    min-height:520px;
    padding:18px;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    border-radius:12px;
  }
  .auth-toggle {display:flex;gap:8px;margin-bottom:14px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006));padding:14px;border-radius:12px;box-shadow:var(--card-shadow);border:1px solid rgba(255,255,255,0.02);margin-bottom:14px}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input[type="text"],input[type="email"],input[type="password"]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  .btn.primary{background:var(--accent);color:#04221f;box-shadow:0 8px 20px rgba(95,224,200,0.12)}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
  .small{font-size:13px;color:var(--muted)}
  .error{color:#ff8080;font-size:13px;margin-top:8px}
  .success{color:#9ef0c7;font-size:13px;margin-top:8px}
  .muted{color:var(--muted)}
  .sections-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .section-btn{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);cursor:pointer}
  .section-btn.active{background:linear-gradient(90deg, rgba(95,224,200,0.03), rgba(95,224,200,0.01));border-color:rgba(95,224,200,0.06);color:var(--accent);font-weight:700}

  /* right pane: workspace/dashboard */
  .workspace{min-height:520px;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.008), transparent);box-shadow:var(--card-shadow);border:1px solid rgba(255,255,255,0.02)}
  .toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
  .welcome{font-size:18px;font-weight:700}
  .tabs{display:flex;gap:8px;align-items:center}
  .tab{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);cursor:pointer}
  .tab.active{background:linear-gradient(90deg, rgba(95,224,200,0.03), rgba(95,224,200,0.01));color:var(--accent);border-color:rgba(95,224,200,0.06);font-weight:700}
  .workspace-inner{margin-top:12px}

  /* placeholders */
  .grid-photos{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}
  .photo{height:110px;border-radius:10px;background:linear-gradient(180deg,#0b0c0d,#0f1113);display:flex;align-items:center;justify-content:center;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}
  .note{padding:12px;border-radius:10px;background:linear-gradient(180deg,#090a0b,#0d0f10);border:1px solid rgba(255,255,255,0.02);margin-bottom:8px}
  .mail-item{padding:12px;border-radius:10px;background:linear-gradient(180deg,#090a0b,#0d0f10);border:1px solid rgba(255,255,255,0.02);margin-bottom:8px}
  .drive-list{display:flex;flex-direction:column;gap:8px}

  /* settings modal */
  .settings-btn{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:8px;border-radius:10px;cursor:pointer;color:var(--muted)}
  .modal {
    position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(920px,92%);background:linear-gradient(180deg,#0b0c0d,#0f1113);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 40px 120px rgba(0,0,0,0.7);z-index:9999;display:none;
  }
  .modal.open{display:block}
  .modal-grid{display:grid;grid-template-columns: 1fr 2fr;gap:12px}
  .setting-row{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg,rgba(255,255,255,0.006),transparent)}
  .backup-codes{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .code-pill{padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);font-weight:700;color:var(--muted)}
  footer{padding:12px 20px;text-align:center;color:var(--muted);font-size:13px;border-top:1px solid rgba(255,255,255,0.02)}
  @media (max-width:980px){
    main{grid-template-columns: 1fr; padding:18px}
    .left{order:2}
  }
</style>
</head>
<body>
<div class="app" role="application" aria-label="MelonTec Cloud">
  <header>
    <div class="brand">MelonTec Cloud</div>
    <div class="nav-right">
      <div id="authSeg" class="seg">Account erstellen | Anmelden</div>
      <button id="openSettings" class="settings-btn" title="Einstellungen">⚙️</button>
    </div>
  </header>

  <main>
    <!-- left: auth + navigation -->
    <aside class="left" aria-label="Seitenleiste">
      <div class="card" id="authCard">
        <div class="auth-toggle">
          <button id="tabRegister" class="seg">Registrieren</button>
          <button id="tabLogin" class="seg active">Anmelden</button>
        </div>

        <div id="registerForm" style="display:none">
          <label for="r_email">E-Mail</label>
          <input id="r_email" type="email" placeholder="name@domain.com" autocomplete="email">
          <label for="r_password" style="margin-top:8px">Passwort (min. 8 Zeichen)</label>
          <input id="r_password" type="password" autocomplete="new-password">
          <div style="height:10px"></div>
          <button id="btnRegister" class="btn primary">Konto erstellen</button>
          <div id="regMsg" class="small"></div>
        </div>

        <div id="loginForm">
          <label for="l_email">E-Mail</label>
          <input id="l_email" type="email" placeholder="name@domain.com" autocomplete="username">
          <label for="l_password" style="margin-top:8px">Passwort</label>
          <input id="l_password" type="password" autocomplete="current-password">
          <div style="height:10px"></div>
          <button id="btnLogin" class="btn primary">Anmelden</button>
          <div id="loginMsg" class="small"></div>
        </div>

        <div id="twofaPrompt" style="display:none;margin-top:12px">
          <label for="twofaCode">2FA Code</label>
          <input id="twofaCode" type="text" placeholder="123456" maxlength="8">
          <div style="height:8px"></div>
          <button id="btnTwofa" class="btn primary">2FA bestätigen</button>
          <div id="twofaMsg" class="small"></div>
        </div>
      </div>

      <div class="card">
        <div class="small">Bereiche</div>
        <div class="sections-list" role="navigation" aria-label="Bereiche">
          <div class="section-btn active" data-section="photos">Photos</div>
          <div class="section-btn" data-section="notes">Notes</div>
          <div class="section-btn" data-section="melmail">MelMail</div>
          <div class="section-btn" data-section="meldat">melDat</div>
        </div>
      </div>

      <div class="card">
        <div class="small">Kurzinformation</div>
        <div style="height:8px"></div>
        <div class="muted">SSS • Software · Security · Services</div>
        <div style="height:8px"></div>
        <div class="small">Status: <span id="onlineStatus">offline</span></div>
      </div>
    </aside>

    <!-- right: workspace -->
    <section class="workspace" id="workspace" aria-live="polite">
      <div class="toolbar">
        <div>
          <div class="welcome">Willkommen, <span id="userName">Gast</span></div>
          <div class="small" id="userEmail">Nicht angemeldet</div>
        </div>
        <div class="tabs" role="tablist">
          <div class="tab active" data-tab="overview">Übersicht</div>
          <div class="tab" data-tab="activity">Aktivität</div>
        </div>
      </div>

      <div class="workspace-inner" id="workspaceInner">
        <!-- Overview / content placeholders -->
        <div id="overview">
          <h3>Deine Cloud-Inhalte</h3>
          <div style="height:12px"></div>

          <div id="photosArea">
            <h4>Photos</h4>
            <div class="grid-photos" id="photosGrid">
              <div class="photo">No photos — upload via melDat</div>
            </div>
          </div>

          <div style="height:12px"></div>

          <div id="notesArea">
            <h4>Notes</h4>
            <div id="notesList">
              <div class="note">Keine Notizen</div>
            </div>
          </div>

          <div style="height:12px"></div>

          <div id="mailArea">
            <h4>MelMail</h4>
            <div id="mailList">
              <div class="mail-item">Keine Mails</div>
            </div>
          </div>

          <div style="height:12px"></div>

          <div id="driveArea">
            <h4>melDat (Drive)</h4>
            <div class="drive-list" id="driveList">
              <div class="note">Keine Dateien</div>
            </div>
          </div>
        </div>

        <div id="activity" style="display:none">
          <h3>Letzte Aktivität</h3>
          <div class="small" id="activityLog">—</div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    MelonTec • SSS — Demo Cloud • Für Produktion: HTTPS & KMS erforderlich
  </footer>
</div>

<!-- Settings modal -->
<div id="settingsModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <h3>Account Einstellungen</h3>
  <div class="modal-grid">
    <div>
      <div class="small" style="margin-bottom:8px">Schnelle Aktionen</div>
      <div class="setting-row">
        <div>
          <div style="font-weight:700">2‑Faktor Authentifizierung</div>
          <div class="small">Schütze dein Konto mit TOTP (z. B. Google Authenticator)</div>
        </div>
        <div>
          <button id="setup2FA" class="btn ghost">Einrichten</button>
        </div>
      </div>

      <div style="height:10px"></div>

      <div class="setting-row">
        <div>
          <div style="font-weight:700">Sitzungen & Tokens</div>
          <div class="small">Aktive Geräte & Refresh Token verwalten</div>
        </div>
        <div><button id="btnLogoutAll" class="btn ghost">Abmelden (alle)</button></div>
      </div>
    </div>

    <div>
      <div class="small">Konto</div>
      <div style="height:8px"></div>
      <div id="settingsContent">
        <div class="small">E-Mail</div>
        <div id="settingsEmail" style="font-weight:700;margin-bottom:10px">—</div>

        <div class="small">2FA Status</div>
        <div id="settings2fa" style="font-weight:700;margin-bottom:10px">Aus</div>

        <div id="qrArea" style="display:none">
          <div class="small">QR zum Scannen</div>
          <div style="height:8px"></div>
          <img id="qrImg" alt="QR Code" style="width:160px;border-radius:8px;border:1px solid rgba(255,255,255,0.03)">
          <div class="backup-codes" id="backupCodes"></div>
        </div>

        <div id="setupMsg" class="small"></div>
      </div>
    </div>
  </div>

  <div style="height:14px"></div>
  <div style="text-align:right">
    <button id="closeSettings" class="btn ghost">Schließen</button>
  </div>
</div>

<script>
/* --- Configuration --- */
const API_BASE = ''; // leave empty for same origin or set to 'https://your-backend.example'
let tmpToken = null; // temporary token for 2FA step
let accessToken = null; // store access token (in memory for demo)
let currentUser = null;

/* --- Helpers --- */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
function el(tag, c){ const e = document.createElement(tag); if(c) e.className = c; return e; }
function toast(msg, ok=true){ const t = document.createElement('div'); t.innerText = msg; t.style.position='fixed';t.style.right='18px';t.style.bottom='18px';t.style.padding='12px 16px';t.style.borderRadius='10px'; t.style.zIndex=99999; t.style.background = ok ? 'rgba(0,0,0,0.75)' : 'rgba(120,10,10,0.9)'; t.style.color='white'; document.body.appendChild(t); setTimeout(()=> t.style.opacity=0,2200); setTimeout(()=> t.remove(),2800); }

/* --- CSRF token fetch for protected POSTs (backend provides /csrf-token) --- */
async function getCsrf(){
  try{
    const r = await fetch(API_BASE + '/csrf-token', { credentials: 'include' });
    if(!r.ok) return null;
    const j = await r.json();
    return j.csrfToken || j.csrf || null;
  }catch(e){ return null; }
}

/* --- Auth UI toggles --- */
$('#tabRegister').addEventListener('click', ()=> {
  $('#tabRegister').classList.add('active');
  $('#tabLogin').classList.remove('active');
  $('#registerForm').style.display = 'block';
  $('#loginForm').style.display = 'none';
  $('#twofaPrompt').style.display = 'none';
});
$('#tabLogin').addEventListener('click', ()=> {
  $('#tabLogin').classList.add('active');
  $('#tabRegister').classList.remove('active');
  $('#loginForm').style.display = 'block';
  $('#registerForm').style.display = 'none';
  $('#twofaPrompt').style.display = 'none';
});

/* --- Register --- */
$('#btnRegister').addEventListener('click', async ()=>{
  $('#regMsg').innerText = '';
  const email = $('#r_email').value.trim();
  const password = $('#r_password').value;
  if(!email || !password || password.length < 8){ $('#regMsg').innerText = 'Bitte gültige E-Mail und Passwort (min. 8 Zeichen).'; return; }
  try{
    const csrf = await getCsrf();
    const res = await fetch(API_BASE + '/api/register', {
      method:'POST',
      headers: {'Content-Type':'application/json', ...(csrf?{'x-csrf-token':csrf}: {})},
      credentials:'include',
      body: JSON.stringify({ email, password })
    });
    const j = await res.json();
    if(res.ok && j.ok){ $('#regMsg').innerText = 'Registriert — du kannst dich jetzt anmelden.'; toast('Registrierung erfolgreich'); $('#tabLogin').click(); }
    else { $('#regMsg').innerText = j.error || JSON.stringify(j); }
  }catch(e){ $('#regMsg').innerText = 'Fehler bei Registrierung'; }
});

/* --- Login --- */
$('#btnLogin').addEventListener('click', async ()=>{
  $('#loginMsg').innerText = '';
  const email = $('#l_email').value.trim();
  const password = $('#l_password').value;
  if(!email || !password){ $('#loginMsg').innerText = 'Bitte E-Mail & Passwort eingeben.'; return; }
  try{
    const csrf = await getCsrf();
    const res = await fetch(API_BASE + '/api/login', {
      method:'POST',
      headers: {'Content-Type':'application/json', ...(csrf?{'x-csrf-token':csrf}: {})},
      credentials:'include',
      body: JSON.stringify({ email, password })
    });
    const j = await res.json();
    if(!res.ok){ $('#loginMsg').innerText = j.error || 'Anmeldefehler'; return; }

    if(j.twofa_required){
      tmpToken = j.tmp_token;
      $('#loginForm').style.display = 'none';
      $('#twofaPrompt').style.display = 'block';
      $('#twofaMsg').innerText = '2FA erforderlich — Code eingeben';
      return;
    }

    // success: access token returned
    accessToken = j.accessToken;
    currentUser = { email };
    onLoginSuccess();
    toast('Erfolgreich angemeldet');
  }catch(e){ $('#loginMsg').innerText = 'Fehler beim Anmelden'; }
});

/* --- 2FA verify (after login) --- */
$('#btnTwofa').addEventListener('click', async ()=>{
  $('#twofaMsg').innerText = '';
  const code = $('#twofaCode').value.trim();
  if(!code){ $('#twofaMsg').innerText = 'Bitte 2FA-Code eingeben'; return; }
  try{
    const csrf = await getCsrf();
    const res = await fetch(API_BASE + '/api/2fa/verify', {
      method:'POST',
      headers: {'Content-Type':'application/json', ...(csrf?{'x-csrf-token':csrf}: {})},
      credentials:'include',
      body: JSON.stringify({ tmp_token: tmpToken, code })
    });
    const j = await res.json();
    if(res.ok && j.accessToken){
      accessToken = j.accessToken;
      currentUser = { email: $('#l_email').value.trim() || $('#r_email').value.trim() };
      tmpToken = null;
      onLoginSuccess();
      toast('2FA bestätigt — angemeldet');
    } else {
      $('#twofaMsg').innerText = j.error || '2FA fehlgeschlagen';
    }
  }catch(e){ $('#twofaMsg').innerText = 'Fehler bei 2FA'; }
});

/* --- On login success: update UI + try to load simple content --- */
function onLoginSuccess(){
  $('#userName').innerText = currentUser.email.split('@')[0];
  $('#userEmail').innerText = currentUser.email;
  $('#onlineStatus').innerText = 'online';
  $('#loginForm').style.display = 'none';
  $('#registerForm').style.display = 'none';
  $('#twofaPrompt').style.display = 'none';
  // switch to overview
  showSection('photos');
  // fetch profile to check 2fa status
  fetchProfile();
}

/* --- Fetch profile (protected using access token) --- */
async function fetchProfile(){
  try{
    const res = await fetch(API_BASE + '/api/profile', {
      method:'GET',
      headers: { Authorization: accessToken ? 'Bearer '+accessToken : '' },
      credentials:'include'
    });
    const j = await res.json();
    if(res.ok){
      $('#settingsEmail').innerText = j.email;
      $('#settings2fa').innerText = j.is_2fa_enabled ? 'Aktiv' : 'Aus';
    } else {
      // not logged in
    }
  }catch(e){}
}

/* --- Sections navigation --- */
$$('.section-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    $$('.section-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    showSection(btn.dataset.section);
  });
});
function showSection(key){
  // keep simple: toggle visible areas in workspace overview
  $('#overview').style.display = 'block';
  $('#activity').style.display = 'none';
  $$('#workspace .tab').forEach(t=>t.classList.remove('active'));
  $('#workspace .tab[data-tab="overview"]').classList.add('active');
  // hide all areas then show selected
  ['photosArea','notesArea','mailArea','driveArea'].forEach(id=> $('#'+id).style.display='none');
  if(key==='photos') $('#photosArea').style.display='block';
  if(key==='notes') $('#notesArea').style.display='block';
  if(key==='melmail') $('#mailArea').style.display='block';
  if(key==='meldat') $('#driveArea').style.display='block';
}

/* --- Tabs (overview / activity) --- */
$$('.tab').forEach(t=>{
  t.addEventListener('click', ()=>{
    $$('.tab').forEach(x=>x.classList.remove('active'));
    t.classList.add('active');
    if(t.dataset.tab==='overview'){ $('#overview').style.display='block'; $('#activity').style.display='none' }
    else { $('#overview').style.display='none'; $('#activity').style.display='block' }
  });
});

/* --- Settings modal open/close --- */
$('#openSettings').addEventListener('click', ()=> {
  $('#settingsModal').classList.add('open');
  $('#settingsModal').setAttribute('aria-hidden','false');
});
$('#closeSettings').addEventListener('click', ()=> {
  $('#settingsModal').classList.remove('open');
  $('#settingsModal').setAttribute('aria-hidden','true');
});

/* --- Setup 2FA flow --- */
$('#setup2FA').addEventListener('click', async ()=>{
  // get password for verify (simple demo) => prompt
  const email = currentUser ? currentUser.email : prompt('E-Mail for 2FA setup:');
  const password = prompt('Confirm your password to setup 2FA (demo):');
  if(!email || !password) { $('#setupMsg').innerText = 'Setup abgebrochen'; return; }
  $('#setupMsg').innerText = 'Erstelle 2FA configuration...';
  try{
    const csrf = await getCsrf();
    const res = await fetch(API_BASE + '/api/2fa/setup', {
      method:'POST',
      headers: {'Content-Type':'application/json', ...(csrf?{'x-csrf-token':csrf}: {})},
      credentials:'include',
      body: JSON.stringify({ email, password })
    });
    const j = await res.json();
    if(res.ok){
      // show QR + backup codes
      $('#qrImg').src = j.qr;
      $('#qrArea').style.display = 'block';
      $('#backupCodes').innerHTML = '';
      (j.backup_codes || []).forEach(c=>{
        const p = document.createElement('div'); p.className='code-pill'; p.innerText = c; $('#backupCodes').appendChild(p);
      });
      $('#settings2fa').innerText = 'Aktiv';
      $('#setupMsg').innerText = '2FA eingerichtet — sichere die Backup-Codes gut.';
      toast('2FA eingerichtet — Backup-Codes angezeigt');
    } else {
      $('#setupMsg').innerText = j.error || 'Fehler beim 2FA-Setup';
    }
  }catch(e){
    $('#setupMsg').innerText = 'Fehler beim 2FA-Setup';
  }
});

/* --- Logout all (revoke refresh tokens) --- */
$('#btnLogoutAll').addEventListener('click', async ()=>{
  try{
    const res = await fetch(API_BASE + '/api/logout', { method:'POST', credentials:'include' });
    if(res.ok){ accessToken = null; currentUser=null; $('#userName').innerText='Gast'; $('#userEmail').innerText='Nicht angemeldet'; $('#onlineStatus').innerText='offline'; toast('Abgemeldet'); }
    else toast('Logout fehlgeschlagen', false);
  }catch(e){ toast('Logout fehlgeschlagen', false); }
});

/* --- quick demo: populate placeholders after login (mock content) --- */
function populateDemoContent(){
  // demo photos
  $('#photosGrid').innerHTML = '';
  for(let i=1;i<=8;i++){
    const d = document.createElement('div'); d.className='photo'; d.innerText='Photo '+i;
    $('#photosGrid').appendChild(d);
  }
  // notes
  $('#notesList').innerHTML = '';
  for(let i=1;i<=3;i++){
    const n = document.createElement('div'); n.className='note'; n.innerHTML = `<strong>Notiz ${i}</strong><div class="small" style="margin-top:6px">Das ist ein Beispieltext für Notiz ${i}.</div>`;
    $('#notesList').appendChild(n);
  }
  // mail
  $('#mailList').innerHTML = '';
  for(let i=1;i<=4;i++){
    const m = document.createElement('div'); m.className='mail-item'; m.innerHTML = `<strong>Mail ${i}</strong><div class="small">Absender ${i} • Betreff Beispiel</div>`;
    $('#mailList').appendChild(m);
  }
  // drive
  $('#driveList').innerHTML = '';
  for(let i=1;i<=4;i++){
    const f = document.createElement('div'); f.className='note'; f.innerHTML = `<strong>Datei_${i}.pdf</strong><div class="small">Größe: ${(Math.random()*4+0.2).toFixed(2)} MB</div>`;
    $('#driveList').appendChild(f);
  }
}

/* when login success show demo content */
function onLoginSuccess(){
  $('#userName').innerText = currentUser.email.split('@')[0];
  $('#userEmail').innerText = currentUser.email;
  $('#onlineStatus').innerText = 'online';
  $('#loginForm').style.display = 'none';
  $('#registerForm').style.display = 'none';
  $('#twofaPrompt').style.display = 'none';
  populateDemoContent();
  fetchProfile();
}

/* initial states */
showSection('photos');

/* keyboard shortcut D to replay a friendly toast (dev) */
window.addEventListener('keydown', e=>{ if(e.key==='d') toast('Developer mode — MelonTec Cloud demo') });
</script>
</body>
</html>
